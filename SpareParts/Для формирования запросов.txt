Глава 51. Системные каталоги

В каталоге pg_attribute хранится информация о столбцах таблицы. Для каждого столбца каждой
таблицы в pg_attribute существует ровно одна строка

В каталоге pg_class описываются таблицы и прочие объекты, имеющие столбцы или каким-то об-
разом подобные таблицам. Сюда входят индексы (но смотрите также pg_index), последовательно-
сти (но смотрите также pg_sequence), представления, материализованные представления, состав-
ные типы и таблицы TOAST; см. relkind. Далее, подразумевая все эти типы объектов, мы будем
говорить об «отношениях». Не все столбцы pg_class здесь имеют смысл для всех видов отношений.

В каталоге pg_database хранится информация о доступных базах данных. Базы данных создаются
командой CREATE DATABASE. Подробнее о предназначении некоторых свойств баз можно узнать в
Главе 22

В каталоге pg_index содержится часть информации об индексах. Остальная информация в основ-
ном находится в pg_class.

В каталоге pg_proc хранится информация об обычных функциях, процедурах, агрегатных и окон-
ных функциях (в совокупности также называемых подпрограммами).

В каталоге pg_sequence содержится информация о последовательностях. Некоторая информация
о последовательностях, в частности имя и схема, хранится в pg_class.

В каталоге pg_statistic хранится статистическая информация о содержимом базы данных. Запи-
си в нём создаются командой ANALYZE, а затем используются планировщиком запросов. Заметьте,
что все эти данные по природе своей неточные, даже если предполагается, что они актуальны.

В каталоге pg_type хранится информация о типах данных. Базовые типы и типы-перечисления
(скалярные типы) создаются командой CREATE TYPE, а домены — командой CREATE DOMAIN. При
добавлении любой таблицы в базу данных автоматически создаётся составной тип, представляю-
щий структуру строки таблицы. Также возможно создавать составные типы с помощью команды
CREATE TYPE AS

Глава 52. Системные представления

pg_backend_memory_contexts
В представлении pg_backend_memory_contexts показываются все контексты памяти серверного
процесса, обслуживающего текущий сеанс.
Представление pg_backend_memory_contexts содержит одну строку для каждого контекста памя-
ти.

pg_config
В представлении pg_config описываются конфигурационные параметры времени компиляции
для текущей установленной версии PostgreSQL. Оно предназначено, например, для программ-
ных средств, которым может потребоваться узнать у PostgreSQL расположение требуемых заголо-
вочных файлов и библиотек. Оно выдаёт ту же базовую информацию, что и клиентская утилита
PostgreSQL pg_config.

 pg_file_settings
В представлении pg_file_settings показывается сводное содержимое файлов конфигурации сер-
вера. Для каждой имеющейся в этих файлах записи «имя = значение» это представление содержит
строку с отметкой, показывающей, может ли это значение быть успешно применено. Также это
представление может содержать дополнительные строки, говорящие о проблемах, не связанных с
записями «имя = значение», например, синтаксических ошибках в этих файлах.

В представлении pg_hba_file_rules показывается сводное содержимое файла конфигурации
аутентификации клиентов, pg_hba.conf. Для каждой непустой и незакомментированной строки в
этом файле данное представление содержит одну строку с отметкой, показывающей, может ли это
правило быть успешно применено

Представление pg_indexes даёт доступ к полезной информации обо всех индексах в базе данных.

Представление pg_locks даёт доступ к информации о блокировках, удерживаемых активными про-
цессами на сервере баз данных. Подробнее блокировки рассматриваются в Главе 13.

Представление pg_sequences даёт доступ к полезной информации обо всех последовательностях
в базе данных.

Представление pg_stats открывает доступ к информации, хранящейся в каталоге pg_statistic.
Это представление даёт доступ только к тем строкам каталога pg_statistic, что соответствуют
таблицам, которые пользователь может читать; таким образом, это представление можно без опа-
сений разрешить читать всем.

Представление pg_stats_ext открывает доступ к информации о каждом объекте расширенной ста-
тистики, объединяя данные из каталогов pg_statistic_ext и pg_statistic_ext_data. Это пред-
ставление даёт доступ только к тем строкам pg_statistic_ext и pg_statistic_ext_data, что со-
ответствуют таблицам, владельцем которых является пользователь: таким образом, это представ-
ление можно без опасений разрешить читать всем.

Представление pg_stats_ext_exprs открывает доступ к информации обо всех выражениях, вклю-
чённых в объекты расширенной статистики, объединяя данные из каталогов pg_statistic_ext и
pg_statistic_ext_data. 

Представление pg_tables даёт доступ к полезной информации обо всех таблицах в базе данных.